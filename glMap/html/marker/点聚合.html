<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>基本点聚合功能</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            height: 100%;
        }

        #mapContainer {
            position: relative;
            height: 100%;
            width: 100%;
        }
    </style>
</head>
<script charset="utf-8" src="https://map.qq.com/api/gljs?v=1.exp&key=T66BZ-HCDEV-PDMPP-UIB4K-5Q43T-KKFUD"></script>

<body onload="init()">
    <div id='mapContainer'></div>
    <script>
        var map;
        function init() {
            var drawContainer = document.getElementById('mapContainer');
            var center = new TMap.LatLng(39.984104, 116.307503);//设置中心点坐标
            map = new TMap.Map(drawContainer, {
                zoom: 12,
                pitch: 40,
                center: center,
                draggable: true,
                scrollable: true,
                mapStyleId: "style 1"
            });
            // 创建点聚合实例
            var markerCluster = new TMap.MarkerCluster({
                id: 'cluster',
                map,
                enableDefaultStyle: true, // 启用默认样式
                minimumClusterSize: 2, // 形成聚合簇的最小个数
                geometries: [{ // 点数组
                    position: new TMap.LatLng(39.953416, 116.480945)
                },
                {
                    position: new TMap.LatLng(39.984104, 116.407503)
                },
                {
                    position: new TMap.LatLng(39.908802, 116.497502)
                },
                {
                    position: new TMap.LatLng(40.040417, 116.373514)
                },
                {
                    position: new TMap.LatLng(39.953416, 116.380945)
                },
                {
                    position: new TMap.LatLng(39.984104, 116.307503)
                },
                {
                    position: new TMap.LatLng(39.908802, 116.397502)
                },
                {
                    position: new TMap.LatLng(40.040417, 116.273514)
                },
                ],
                zoomOnClick: true, // 点击簇时放大至簇内点分离
                gridSize: 60, // 聚合算法的可聚合距离
                averageCenter: false, // 每个聚和簇的中心是否应该是聚类中所有标记的平均值
                maxZoom: 10 // 采用聚合策略的最大缩放级别
            });
        }
    </script>
</body>

</html>